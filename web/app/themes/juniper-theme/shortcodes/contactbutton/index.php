<?php


namespace Limesoda\Astra_Child\Shortcodes\ContactButton;

if (!defined('ABSPATH')) {
    exit; // Exit if accessed directly.
}

if (!class_exists('ContactButtonShortcode')) {

    class ContactButtonShortcode {

        public function __construct() {
            add_shortcode('ls_contact_button', array($this, 'render_contact_button'));
        }

        public function render_contact_button() {
            ob_start();
            if (get_page_by_title('Kontakt')){
                $url_de = get_the_permalink(get_page_by_title('Kontakt')) . '/#fragen-musterbestellung';
            }
            if (get_page_by_title('Kontakt')){
            $url_en = get_the_permalink(get_page_by_title('Contact')) . '/#contact-form';
            }
            $current_lang = defined('ICL_LANGUAGE_CODE');
            ?>
           <div class="ls-contact-button">
            <div id="musterbestellung-floating" class="!bg-[#ffeb00] !p-2 text-black fixed right-[10px] bottom-[160px] w-12 h-12 rounded-full flex justify-center items-center md:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 45 45" fill="none">
                <path d="M14.1265 31.0984C12.863 31.0984 11.8447 32.1167 11.8447 33.3802C11.8447 34.6437 12.8819 35.662 14.1265 35.662C15.39 35.662 16.4083 34.6248 16.4083 33.3802C16.4083 32.1167 15.39 31.0984 14.1265 31.0984ZM14.1265 34.3608C13.5796 34.3608 13.1459 33.9271 13.1459 33.3802C13.1459 32.8333 13.5796 32.3996 14.1265 32.3996C14.6734 32.3996 15.1071 32.8333 15.1071 33.3802C15.1071 33.9271 14.6734 34.3608 14.1265 34.3608Z" fill="black"/>
                <path d="M39.113 21.085L37.8684 19.3501C37.661 19.0483 37.2461 18.9918 36.9633 19.1992C36.6615 19.4066 36.605 19.8215 36.8124 20.1044L38.057 21.8393C38.0947 21.8958 38.0947 21.9901 38.0193 22.0278L34.0215 24.9131L28.8922 17.7283L29.3636 16.8043L32.6071 14.4848C32.6637 14.4282 32.758 14.4471 32.7957 14.5225L33.7575 15.8802C33.9649 16.182 34.3798 16.2385 34.6626 16.0311C34.9643 15.8237 35.0209 15.4277 34.8135 15.1259L33.8517 13.7682C33.3992 13.127 32.494 12.9762 31.834 13.4287L30.6459 14.2585L31.306 12.9762C31.4757 12.6367 31.5134 12.2407 31.4002 11.8824C31.2871 11.5241 31.0419 11.2224 30.6836 11.0338L22.6691 6.90397C22.3297 6.73425 21.9337 6.69653 21.5754 6.80968C21.2171 6.92283 20.9154 7.18684 20.7268 7.52627L20.0668 8.8086V7.35655C20.0668 6.56453 19.4067 5.90451 18.6147 5.90451H9.60073C8.8087 5.90451 8.14868 6.54567 8.14868 7.35655V33.3802C8.14868 36.6614 10.8265 39.3392 14.1077 39.3392C15.39 39.3392 16.5969 38.9244 17.5775 38.2266C17.5964 38.2078 17.6153 38.2078 17.6341 38.1889L23.8949 33.7196L29.0619 30.0235L38.7547 23.1027C39.4148 22.6502 39.5656 21.745 39.113 21.085ZM32.9466 25.6674L28.8356 28.5903L25.6109 24.0645L28.2133 19.0106L32.9466 25.6674ZM23.6686 32.2864L22.3485 30.4384L24.9509 25.3845L27.7984 29.3635L23.6686 32.2864ZM22.1034 28.0246L20.0856 26.9874V21.3113L24.4229 23.5365L24.272 23.8193L24.2532 23.8382L22.1034 28.0246ZM25.0263 22.3861L20.0856 19.8404V14.1642L27.327 17.898L25.0263 22.3861ZM18.7844 18.6146H9.48758V13.5607H18.7844V18.6146ZM9.46872 19.9346H18.7656V24.9885H9.46872V19.9346ZM20.0856 28.4583L21.5188 29.1938L20.0856 31.9659V28.4583ZM21.6697 31.7396L22.5937 33.0408L20.0668 34.8511L21.6697 31.7396ZM21.896 8.11086C21.9148 8.07315 21.9525 8.05429 21.9902 8.03543C22.0091 8.01657 22.0468 8.01658 22.1034 8.05429L30.1179 12.1841C30.1556 12.203 30.1745 12.2407 30.1933 12.2596C30.2122 12.2973 30.2122 12.335 30.1745 12.3727L27.9304 16.7288L20.0856 12.6933V11.6561L21.896 8.11086ZM9.61958 7.20569H18.6336C18.709 7.20569 18.7844 7.26227 18.7844 7.3377V12.2407H9.48758V7.3377C9.46872 7.28112 9.52529 7.20569 9.61958 7.20569ZM14.1266 38.038C11.5619 38.038 9.46872 35.9448 9.46872 33.3802V26.2897H18.7656V33.3802C18.7844 35.9448 16.6912 38.038 14.1266 38.038Z" fill="black"/>
                <path d="M35.8319 18.2752C36.1902 18.2752 36.4731 17.9735 36.4731 17.634C36.4731 17.2757 36.1713 16.974 35.8319 16.974C35.4736 16.974 35.1719 17.2757 35.1719 17.634C35.1719 17.9735 35.4547 18.2752 35.8319 18.2752Z" fill="black"/>
            </svg>
        </div>
		<?php if ($current_lang === 'en') { ?>
		<a href="<?php echo $url_en; ?>"><i class="icon-message"></i></a>
		<?php } else { ?>
		<a href="<?php echo $url_de; ?>"><i class="icon-message"></i></a>
		<?php } ?>
	</div>
            <?php
            return ob_get_clean();
        }
    }

    new ContactButtonShortcode();
}

